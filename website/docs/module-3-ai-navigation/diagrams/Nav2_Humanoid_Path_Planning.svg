<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <style>
    .title { font: bold 24px sans-serif; fill: #333; }
    .subtitle { font: 18px sans-serif; fill: #666; }
    .robot { fill: #fce4ec; stroke: #ad1457; stroke-width: 2; }
    .path { stroke: #1976d2; stroke-width: 3; fill: none; }
    .footstep { fill: #b39ddb; stroke: #4527a0; stroke-width: 1.5; }
    .obstacle { fill: #ffcdd2; stroke: #d32f2f; stroke-width: 2; }
    .map-grid { stroke: #e0e0e0; stroke-width: 1; }
    .zmp { fill: #fff; stroke: #000; stroke-width: 2; stroke-dasharray: 4 2; }
    .arrow { stroke: #555; stroke-width: 2; marker-end: url(#arrowhead); }
    .label { font: 14px sans-serif; fill: #333; text-anchor: middle; }
    .small-label { font: 12px sans-serif; fill: #555; text-anchor: middle; }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
      refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#555" />
    </marker>
  </defs>
  
  <rect width="100%" height="100%" fill="#ffffff"/>
  
  <text x="400" y="40" class="title">Nav2 Path Planning for Humanoid Robots</text>
  <text x="400" y="70" class="subtitle">Footstep Planning with Balance Constraints</text>
  
  <!-- Grid background -->
  <g id="grid">
    <!-- Horizontal lines -->
    <line x1="50" y1="100" x2="750" y2="100" class="map-grid"/>
    <line x1="50" y1="140" x2="750" y2="140" class="map-grid"/>
    <line x1="50" y1="180" x2="750" y2="180" class="map-grid"/>
    <line x1="50" y1="220" x2="750" y2="220" class="map-grid"/>
    <line x1="50" y1="260" x2="750" y2="260" class="map-grid"/>
    <line x1="50" y1="300" x2="750" y2="300" class="map-grid"/>
    <line x1="50" y1="340" x2="750" y2="340" class="map-grid"/>
    <line x1="50" y1="380" x2="750" y2="380" class="map-grid"/>
    <line x1="50" y1="420" x2="750" y2="420" class="map-grid"/>
    <line x1="50" y1="460" x2="750" y2="460" class="map-grid"/>
    <line x1="50" y1="500" x2="750" y2="500" class="map-grid"/>
    <line x1="50" y1="540" x2="750" y2="540" class="map-grid"/>
    
    <!-- Vertical lines -->
    <line x1="50" y1="100" x2="50" y2="540" class="map-grid"/>
    <line x1="90" y1="100" x2="90" y2="540" class="map-grid"/>
    <line x1="130" y1="100" x2="130" y2="540" class="map-grid"/>
    <line x1="170" y1="100" x2="170" y2="540" class="map-grid"/>
    <line x1="210" y1="100" x2="210" y2="540" class="map-grid"/>
    <line x1="250" y1="100" x2="250" y2="540" class="map-grid"/>
    <line x1="290" y1="100" x2="290" y2="540" class="map-grid"/>
    <line x1="330" y1="100" x2="330" y2="540" class="map-grid"/>
    <line x1="370" y1="100" x2="370" y2="540" class="map-grid"/>
    <line x1="410" y1="100" x2="410" y2="540" class="map-grid"/>
    <line x1="450" y1="100" x2="450" y2="540" class="map-grid"/>
    <line x1="490" y1="100" x2="490" y2="540" class="map-grid"/>
    <line x1="530" y1="100" x2="530" y2="540" class="map-grid"/>
    <line x1="570" y1="100" x2="570" y2="540" class="map-grid"/>
    <line x1="610" y1="100" x2="610" y2="540" class="map-grid"/>
    <line x1="650" y1="100" x2="650" y2="540" class="map-grid"/>
    <line x1="690" y1="100" x2="690" y2="540" class="map-grid"/>
    <line x1="730" y1="100" x2="730" y2="540" class="map-grid"/>
  </g>
  
  <!-- Obstacles -->
  <rect x="250" y="220" width="80" height="40" class="obstacle"/>
  <rect x="450" y="300" width="60" height="80" class="obstacle"/>
  <rect x="300" y="400" width="100" height="40" class="obstacle"/>
  
  <!-- Path from start to goal -->
  <path d="M 100 500 Q 200 400 280 360 Q 380 320 460 260 Q 560 220 650 180" 
        class="path" stroke-dasharray="5,5"/>
  
  <!-- Start position -->
  <circle cx="100" cy="500" r="15" class="robot"/>
  <text x="100" y="505" class="small-label">Start</text>
  
  <!-- Goal position -->
  <circle cx="650" cy="180" r="15" class="robot"/>
  <text x="650" y="185" class="small-label">Goal</text>
  
  <!-- Footsteps along the path -->
  <!-- Left foot steps -->
  <rect x="115" y="490" width="10" height="20" class="footstep" transform="rotate(-30 120 500)"/>
  <rect x="185" y="430" width="10" height="20" class="footstep" transform="rotate(-35 190 440)"/>
  <rect x="255" y="370" width="10" height="20" class="footstep" transform="rotate(-40 260 380)"/>
  <rect x="335" y="310" width="10" height="20" class="footstep" transform="rotate(-45 340 320)"/>
  <rect x="415" y="250" width="10" height="20" class="footstep" transform="rotate(-50 420 260)"/>
  <rect x="495" y="210" width="10" height="20" class="footstep" transform="rotate(-55 500 220)"/>
  <rect x="575" y="170" width="10" height="20" class="footstep" transform="rotate(-60 580 180)"/>
  
  <!-- Right foot steps -->
  <rect x="135" y="470" width="10" height="20" class="footstep" transform="rotate(-25 140 480)"/>
  <rect x="205" y="410" width="10" height="20" class="footstep" transform="rotate(-30 210 420)"/>
  <rect x="275" y="350" width="10" height="20" class="footstep" transform="rotate(-35 280 360)"/>
  <rect x="355" y="290" width="10" height="20" class="footstep" transform="rotate(-40 360 300)"/>
  <rect x="435" y="230" width="10" height="20" class="footstep" transform="rotate(-45 440 240)"/>
  <rect x="515" y="190" width="10" height="20" class="footstep" transform="rotate(-50 520 200)"/>
  
  <!-- Center of Mass path -->
  <path d="M 120 495 Q 220 395 300 355 Q 400 315 480 255 Q 580 215 670 175" 
        class="path" stroke="#ff9800" stroke-width="2"/>
  
  <!-- ZMP (Zero Moment Point) path -->
  <path d="M 120 505 Q 220 405 300 365 Q 400 325 480 265 Q 580 225 670 185" 
        class="zmp"/>
  
  <!-- Robot representation at key points -->
  <g transform="translate(190,430) rotate(-35)">
    <rect x="-15" y="-25" width="30" height="40" class="robot"/>
    <circle cx="0" cy="-30" r="8" class="robot"/>
    <line x1="-10" y1="-20" x2="10" y2="-20" stroke="#333" stroke-width="2"/>
    <line x1="0" y1="-20" x2="0" y2="10" stroke="#333" stroke-width="2"/>
    <line x1="0" y1="10" x2="-10" y2="20" stroke="#333" stroke-width="2"/>
    <line x1="0" y1="10" x2="10" y2="20" stroke="#333" stroke-width="2"/>
  </g>
  
  <g transform="translate(340,310) rotate(-45)">
    <rect x="-15" y="-25" width="30" height="40" class="robot"/>
    <circle cx="0" cy="-30" r="8" class="robot"/>
    <line x1="-10" y1="-20" x2="10" y2="-20" stroke="#333" stroke-width="2"/>
    <line x1="0" y1="-20" x2="0" y2="10" stroke="#333" stroke-width="2"/>
    <line x1="0" y1="10" x2="-10" y2="20" stroke="#333" stroke-width="2"/>
    <line x1="0" y1="10" x2="10" y2="20" stroke="#333" stroke-width="2"/>
  </g>
  
  <!-- Balance constraints visualization -->
  <ellipse cx="340" cy="310" rx="40" ry="20" fill="none" stroke="#4caf50" stroke-width="2" stroke-dasharray="4 2"/>
  <text x="340" y="290" class="small-label">Stability Region</text>
  
  <!-- Legend -->
  <rect x="50" y="550" width="700" height="45" fill="none" stroke="#ccc" stroke-width="1"/>
  <text x="60" y="570" font-size="14" fill="#333">Legend:</text>
  <circle cx="130" cy="565" r="6" class="robot"/>
  <text x="150" y="570" font-size="12" fill="#333">Robot</text>
  <rect x="210" y="558" width="12" height="6" class="footstep"/>
  <text x="235" y="570" font-size="12" fill="#333">Footstep</text>
  <path d="M 300 563 L 315 563" class="path" stroke-dasharray="5,5"/>
  <text x="330" y="570" font-size="12" fill="#333">Planned Path</text>
  <path d="M 400 563 L 415 563" class="zmp"/>
  <text x="435" y="570" font-size="12" fill="#333">ZMP Path</text>
  <rect x="510" y="558" width="12" height="6" class="obstacle"/>
  <text x="535" y="570" font-size="12" fill="#333">Obstacle</text>
</svg>